<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Quote of the Day</title>
  <style>
  body {
  font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", system-ui, sans-serif;
  background: linear-gradient(to bottom, #f2f2f7, #ffffff);
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

.card {
  <button id="toggleEdit" style="float:right; background:#e5e7eb; color:#111;">Edit</button>
<button id="toggleEdit" style="float:right;background:#e5e7eb;color:#111">Edit</button>

<div id="editPanel" style="display:none;margin-top:1rem;text-align:left"<label>Background image</label><br>
<input type="file" id="imagePicker" accept="image/*"><br><br>

<button id="removeImage">Remove background image</button>
<br><br>
>
  <input id="titleInput" placeholder="Title" style="width:100%"><br><br>
  <input type="color" id="bgPicker"> Background<br><br>
  <input type="color" id="buttonPicker"> Buttons<br><br>
  <input id="emojiInput" placeholder="Emoji üòä">
  <button id="applyEmoji">Apply</button>
</div>

  background: rgba(255,255,255,0.8);
  backdrop-filter: blur(20px);
  padding: 24px;
  border-radius: 20px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.08);
  max-width: 420px;
  width: 92%;
  text-align: center;
}
<hr style="margin:1rem 0">

<h3 style="font-weight:600;">Appearance</h3>

<input type="color" id="bgPicker"> Background
<br><br>

<input type="color" id="buttonPicker"> Button colour
<br><br>

<input type="file" id="imagePicker" accept="image/*">
<br><br>

<input type="text" id="emojiInput" placeholder="Add emoji to title üòä">
<br>
<button id="applyEmoji">Apply emoji</button>

h1 {
  font-weight: 600;
  font-size: 1.4rem;
  margin-bottom: 1rem;
}

#quote {
  font-size: 1.05rem;
  line-height: 1.6;
  margin: 1rem 0 1.5rem;
  color: #1c1c1e;
}

button {
  border: none;
  padding: 0.7rem 1.4rem;
  border-radius: 999px;
  background: #007aff;
  color: white;
  font-weight: 600;
  font-size: 0.9rem;
  margin: 0.2rem;
  box-shadow: 0 6px 12px rgba(0,122,255,0.2);
  transition: transform 0.1s ease, box-shadow 0.1s ease;
}

button:active {
  transform: scale(0.97);
  box-shadow: 0 4px 8px rgba(0,122,255,0.15);
}
<div id="editPanel" style="display:none; margin-top:1rem; text-align:left;">
  <h3>Edit Mode</h3>

  <label>Title</label><br>
  <input type="text" id="titleInput" placeholder="Change title"><br><br>

  <label>Button colour</label><br>
  <input type="color" id="buttonPicker"><br><br>

  <label>Background colour</label><br>
  <input type="color" id="bgPicker"><br><br>

  <label>Emoji</label><br>
  <input type="text" id="emojiInput" placeholder="üòä"><br>
  <button id="applyEmoji">Apply Emoji</button>
</div>

textarea {
  width: 100%;
  padding: 10px;
  border-radius: 14px;
  border: 1px solid #ddd;
  font-family: inherit;
  font-size: 0.9rem;
}

#saved {
  margin-top: 8px;
  font-size: 0.8rem;
  opacity: 0.7;
}

  </style>
</head>
<body>
  <div class="card">
    <button id="toggleEdit" style="float:right; background:#e5e7eb; color:#111;">Edit</button>

<div id="editPanel" style="display:none; margin-top:1rem; text-align:left;">
  <h3>Edit Mode</h3>

  <input id="titleInput" placeholder="Change title" style="width:100%"><br><br>

  <label>Background</label><br>
  <input type="color" id="bgPicker"><br><br>

  <label>Buttons</label><br>
  <input type="color" id="buttonPicker"><br><br>

  <label>Emoji</label><br>
  <input id="emojiInput" placeholder="üòä">
  <button id="applyEmoji">Apply</button>
</div>

    <h1>Quote of the Day</h1>
    <p id="quote">Click the button to see a quote.</p>

    <button id="new-quote">New quote</button>
    <button id="favourite">‚ù§Ô∏è Save favourite</button>
<button id="deleteQuote">üóëÔ∏è Delete this quote</button>
<button id="openBin">‚ôªÔ∏è Recycle bin</button>

    <p id="saved"></p>

    <textarea
      id="customQuote"
      placeholder="Write your own quote..."
      rows="3"
      style="width:100%; margin-top:1rem;"
    ></textarea>
    <br><br>
    <button id="addQuote">Add quote</button>
    <br><br>
    <button id="viewFavourite">View favourite</button>
  </div>

  <script>
 // ---- DEFAULT QUOTES ----
const defaultQuotes = [
  "Life is really simple, but we insist on making it complicated.",
  "The present moment is all you ever have.",
  "You are not a drop in the ocean. You are the entire ocean in a drop.",
  "What you seek is seeking you.",
  "Silence is a source of great strength."
];

// ---- LOAD ALL QUOTES (MIGRATE OLD DATA) ----
let allQuotes = JSON.parse(localStorage.getItem("allQuotes"));
if (!Array.isArray(allQuotes) || allQuotes.length === 0) {
  const legacy = JSON.parse(localStorage.getItem("quotesList"));
  allQuotes = Array.isArray(legacy) && legacy.length ? legacy : defaultQuotes.slice();
  localStorage.setItem("allQuotes", JSON.stringify(allQuotes));
}

// ---- IMPORT OLD FAVOURITES INTO MAIN ROTATION (ONE-TIME) ----
let favs = JSON.parse(localStorage.getItem("favouritesList")) || [];
let migrated = false;
favs.forEach(q => {
  if (!allQuotes.includes(q)) {
    allQuotes.push(q);
    migrated = true;
  }
});
if (migrated) {
  localStorage.setItem("allQuotes", JSON.stringify(allQuotes));
  localStorage.removeItem("quoteOrder");
  localStorage.removeItem("quoteOrderIndex");
}

// ---- DOM ----
const quoteElement = document.getElementById("quote");
const newQuoteButton = document.getElementById("new-quote");
const favouriteButton = document.getElementById("favourite");
const deleteButton = document.getElementById("deleteQuote");
const savedText = document.getElementById("saved");
const viewButton = document.getElementById("viewFavourite");
const addButton = document.getElementById("addQuote");
const input = document.getElementById("customQuote");
const binButton = document.getElementById("openBin");

// ---- NON-REPEATING ORDER ----
function resetOrder() {
  const order = allQuotes.map((_, i) => i);
  for (let i = order.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [order[i], order[j]] = [order[j], order[i]];
  }
  localStorage.setItem("quoteOrder", JSON.stringify(order));
  localStorage.setItem("quoteOrderIndex", "0");
  return order;
}

let order = JSON.parse(localStorage.getItem("quoteOrder"));
let orderIndex = parseInt(localStorage.getItem("quoteOrderIndex") || "0", 10);
if (!Array.isArray(order) || order.length !== allQuotes.length) {
  order = resetOrder();
  orderIndex = 0;
}

let currentIndex = null;

function showNextQuote() {
  if (!allQuotes.length) {
    quoteElement.textContent = "No quotes left.";
    return;
  }
  if (orderIndex >= order.length) {
    order = resetOrder();
    orderIndex = 0;
  }
  currentIndex = order[orderIndex];
  quoteElement.textContent = allQuotes[currentIndex];
  savedText.textContent = "";
  orderIndex++;
  localStorage.setItem("quoteOrderIndex", String(orderIndex));
}

newQuoteButton.addEventListener("click", showNextQuote);

// ---- FAVOURITES ----
favouriteButton.addEventListener("click", () => {
  const q = quoteElement.textContent.trim();
  if (!q || q === "Click the button to see a quote.") {
    savedText.textContent = "Show a quote first!";
    return;
  }
  let fav = JSON.parse(localStorage.getItem("favouritesList")) || [];
  if (!fav.includes(q)) {
    fav.push(q);
    localStorage.setItem("favouritesList", JSON.stringify(fav));
    savedText.textContent = "Saved!";
  } else {
    savedText.textContent = "Already saved!";
  }
});

// ---- ADD CUSTOM QUOTE ----
addButton.addEventListener("click", () => {
  const q = input.value.trim();
  if (!q) {
    savedText.textContent = "Write something first!";
    return;
  }
  if (!allQuotes.includes(q)) {
    allQuotes.push(q);
    localStorage.setItem("allQuotes", JSON.stringify(allQuotes));
    order.push(allQuotes.length - 1);
    localStorage.setItem("quoteOrder", JSON.stringify(order));
  }
  let fav = JSON.parse(localStorage.getItem("favouritesList")) || [];
  if (!fav.includes(q)) {
    fav.push(q);
    localStorage.setItem("favouritesList", JSON.stringify(fav));
  }
  quoteElement.textContent = q;
  input.value = "";
  savedText.textContent = "Quote added!";
});

// ---- DELETE -> RECYCLE BIN ----
deleteButton.addEventListener("click", () => {
  if (currentIndex === null) {
    savedText.textContent = "No quote to delete.";
    return;
  }

  const q = allQuotes[currentIndex];

  let bin = JSON.parse(localStorage.getItem("recycleBin")) || [];
  bin.push(q);
  localStorage.setItem("recycleBin", JSON.stringify(bin));

  allQuotes.splice(currentIndex, 1);
  localStorage.setItem("allQuotes", JSON.stringify(allQuotes));

  let fav = JSON.parse(localStorage.getItem("favouritesList")) || [];
  fav = fav.filter(x => x !== q);
  localStorage.setItem("favouritesList", JSON.stringify(fav));

  order = resetOrder();
  orderIndex = 0;

  showNextQuote();
  savedText.textContent = "Moved to recycle bin.";
});

// ---- NAVIGATION ----
viewButton.addEventListener("click", () => window.location.href = "favourite.html");
binButton.addEventListener("click", () => window.location.href = "bin.html");
// ==== EDIT MODE (SAFE ADD-ON) ====
const toggleEdit = document.getElementById("toggleEdit");
const editPanel = document.getElementById("editPanel");
const titleInput = document.getElementById("titleInput");
const bgPicker = document.getElementById("bgPicker");
const buttonPicker = document.getElementById("buttonPicker");
const emojiInput = document.getElementById("emojiInput");
const applyEmoji = document.getElementById("applyEmoji");
const title = document.querySelector("h1");

const settings = JSON.parse(localStorage.getItem("siteSettings")) || {};
if (settings.title) title.textContent = settings.title;
if (settings.bg) document.body.style.background = settings.bg;
    if (settings.image) {
  document.body.style.background = `url(${settings.image}) center / cover no-repeat fixed`;
}

if (settings.buttonColor) document.querySelectorAll("button").forEach(b => b.style.background = settings.buttonColor);
if (settings.emoji) title.textContent = settings.emoji + " " + (settings.title || "Quote of the Day");

toggleEdit.addEventListener("click", () => {
  editPanel.style.display = editPanel.style.display === "none" ? "block" : "none";
});

titleInput.addEventListener("input", () => {
  settings.title = titleInput.value;
  title.textContent = titleInput.value;
  localStorage.setItem("siteSettings", JSON.stringify(settings));
});

bgPicker.addEventListener("change", () => {
  settings.bg = bgPicker.value;
  document.body.style.background = settings.bg;
  localStorage.setItem("siteSettings", JSON.stringify(settings));
});

buttonPicker.addEventListener("change", () => {
  settings.buttonColor = buttonPicker.value;
  document.querySelectorAll("button").forEach(b => b.style.background = settings.buttonColor);
  localStorage.setItem("siteSettings", JSON.stringify(settings));
  const imagePicker = document.getElementById("imagePicker");
const removeImage = document.getElementById("removeImage");

});

applyEmoji.addEventListener("click", () => {
  if (!emojiInput.value) return;
  settings.emoji = emojiInput.value;
  title.textContent = settings.emoji + " " + (settings.title || "Quote of the Day");
  localStorage.setItem("siteSettings", JSON.stringify(settings));
});
// ---- IMAGE UPLOAD ----
imagePicker.addEventListener("change", () => {
  const file = imagePicker.files[0];
  if (!file) return;

  const reader = new FileReader();

  reader.onload = function (e) {
    settings.image = e.target.result;
    localStorage.setItem("siteSettings", JSON.stringify(settings));
    document.body.style.background = `url(${settings.image}) center / cover no-repeat fixed`;
  };

  reader.readAsDataURL(file);
});

// ---- REMOVE IMAGE ----
removeImage.addEventListener("click", () => {
  delete settings.image;
  localStorage.setItem("siteSettings", JSON.stringify(settings));
  document.body.style.background = settings.bg || "#ffffff";
});
const imagePicker = document.getElementById("imagePicker");

if (imagePicker) {
  imagePicker.addEventListener("change", () => {
    const file = imagePicker.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(e) {
      document.body.style.background = `url(${e.target.result}) center / cover no-repeat fixed`;
      alert("This preview is only for YOU. To make it permanent upload the image to GitHub.");
    };
    reader.readAsDataURL(file);
  });
}


  </script>
  
</body>
</html>

